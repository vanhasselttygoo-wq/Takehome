<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cybersecurity Matrix Quiz ‚Äî with Rain</title>

<style>
:root{
  --bg:#000000;
  --panel:#0a0a0a;
  --accent:#00ff66;
  --accent2:#00cc44;
  --good:#00ff99;
  --bad:#ff3333;
  --text:#ccffcc;
  --muted:#44aa66;
  --ok:#ccff33;
}
*{box-sizing:border-box;font-family:'Consolas','Courier New',monospace;}
html,body{height:100%;margin:0;padding:0;background:#000;}
body{
  background:radial-gradient(circle at top left, #001a00, #000);
  color:var(--text);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  padding:30px;
  position:relative;
  overflow-x:hidden;
}

/* canvas */
#matrixCanvas{
  position:fixed;
  inset:0;
  z-index:9999;
  pointer-events:none;
  mix-blend-mode:screen;
  opacity:0.85;
}

.app{
  position:relative;
  z-index:10000;
  max-width:700px;width:100%;
  background:rgba(0,0,0,0.45);
  padding:24px;
  border-radius:16px;
  box-shadow:0 0 25px rgba(0,255,100,0.06);
  backdrop-filter: blur(6px);
  border:1px solid rgba(0,255,80,0.06);
}

h1{
  color:var(--accent);
  margin-bottom:10px;
  text-align:center;
  text-shadow:0 0 15px var(--accent);
  letter-spacing:1px;
}

.progress-section{text-align:center;margin-top:10px;}
.progress-text{color:var(--muted);font-size:0.9rem;margin-bottom:4px;}
.progress-container{
  width:100%;
  background:rgba(0,255,100,0.06);
  border-radius:10px;
  height:10px;
  overflow:hidden;
}
.progress-bar{
  height:10px;width:0;
  background:linear-gradient(90deg,var(--accent2),var(--accent));
  transition:width 0.4s ease;
  box-shadow:0 0 10px var(--accent);
}
.question{
  font-weight:700;font-size:1.15rem;margin:16px 0;
  color:var(--accent);
  text-shadow:0 0 6px rgba(0,255,102,0.08);
}
.choices{display:flex;gap:10px;margin-top:8px;}
.btn{
  flex:1;padding:12px;border:none;border-radius:10px;font-weight:700;
  cursor:pointer;background:rgba(0,255,80,0.03);color:var(--text);transition:all 0.16s;
  border:1px solid rgba(0,255,100,0.06);
}
.btn:hover{background:var(--accent);color:#000;transform:translateY(-2px);box-shadow:0 0 10px var(--accent);}
.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#000;font-weight:900;box-shadow:0 0 14px rgba(0,255,80,0.5);}
.feedback{margin-top:14px;min-height:24px;font-weight:600;}
.correct{color:var(--good);}
.wrong{color:var(--bad);}
.footer{text-align:center;margin-top:20px;color:var(--muted);font-size:0.9rem;}
input{width:100%;padding:8px;border-radius:8px;border:1px solid var(--accent);background:rgba(0,255,80,0.02);color:var(--text);}
.hidden{display:none;}
#summary{display:none;text-align:center;margin-top:20px;}
#summary h2{color:var(--accent);text-shadow:0 0 10px var(--accent);}
#rating{font-size:1.05rem;margin-top:8px;font-weight:bold;}
.excellent{color:var(--good);}
.good{color:var(--ok);}
.tryagain{color:var(--bad);}

@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);opacity:1;}}
.fade-in{animation:fadeIn 0.6s ease-in;}

@media (max-width:520px){
  .app{padding:16px;border-radius:12px;}
  .question{font-size:1rem;}
}
</style>
</head>

<body>

<!-- Matrix Rain -->
<canvas id="matrixCanvas"></canvas>

<div class="app">
  <h1>CYBERSECURITY MATRIX QUIZ</h1>
  <p class="muted" style="text-align:center;color:var(--muted);">Decide if each statement is TRUE or FALSE.</p>

  <div id="namePrompt">
    <h3 style="text-align:center;color:var(--accent);">Enter your hacker alias:</h3>
    <input id="userName" placeholder="Anonymous..." autocomplete="off">
    <button id="startBtn" class="btn primary" style="margin-top:10px;width:100%;">INITIATE QUIZ</button>
  </div>

  <div class="progress-section hidden" id="progressSection">
    <div id="progressText" class="progress-text"></div>
    <div class="progress-container">
      <div id="progressBar" class="progress-bar"></div>
    </div>
  </div>

  <div id="quizArea" class="hidden">
    <div id="question" class="question"></div>
    <div class="choices">
      <button id="btnTrue" class="btn">TRUE</button>
      <button id="btnFalse" class="btn">FALSE</button>
    </div>
    <div id="feedback" class="feedback"></div>
    <div style="text-align:center;margin-top:15px;">
      <button id="nextBtn" class="btn primary" style="display:none;">NEXT ‚ûú</button>
    </div>
  </div>

  <div id="summary" class="fade-in">
    <h2>QUIZ COMPLETE üß†</h2>
    <p id="scoreText"></p>
    <div id="rating"></div>
    <p id="saveStatus" style="margin-top:10px;color:var(--muted);"></p>
    <button id="restartBtn" class="btn primary" style="margin-top:15px;">RESTART</button>
  </div>

  <div class="footer">SYSTEM LOG: results auto-saved to Google Sheet (admin only)</div>
</div>

<script>
// MATRIX RAIN SCRIPT (unchanged)
(function matrixRain(){
  const canvas = document.getElementById('matrixCanvas');
  const ctx = canvas.getContext('2d', {alpha: true});

  let symbolSize = 18;
  let spawnRate = 0.95;
  let speedFactor = 0.6;
  let fadeAlpha = 0.05;

  const chars = '„Ç¢„Ç§„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É£„É©„ÉØ„Ç¨„Ç∂„ÉÄ„Éê„Éë„Ç§...0123456789@#$%&*+-=<>';

  let width, height, columns, drops;

  function resize(){
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
    columns = Math.floor(width / symbolSize);
    drops = new Array(columns).fill(0).map(() => ({
      y: Math.floor(Math.random()*-1000),
      speed: (Math.random()*0.9 + 0.6)*(symbolSize*speedFactor)
    }));
    ctx.font = `${symbolSize}px monospace`;
  }
  window.addEventListener('resize', resize, {passive:true});
  resize();

  function draw(){
    ctx.fillStyle = `rgba(0,0,0,${fadeAlpha})`;
    ctx.fillRect(0,0,width,height);

    for(let i=0;i<columns;i++){
      if(Math.random() > spawnRate && drops[i].y < 0) continue;

      const x = i * symbolSize;
      const drop = drops[i];

      ctx.fillStyle = `rgba(0,255,120,0.95)`;
      ctx.fillText(chars.charAt(Math.floor(Math.random()*chars.length)), x, drop.y);

      ctx.fillStyle = `rgba(0,200,100,0.35)`;
      ctx.fillText(chars.charAt(Math.floor(Math.random()*chars.length)), x, drop.y - symbolSize);

      drop.y += drop.speed;

      if(drop.y > height + Math.random()*1000){
        drop.y = -Math.random()*1000;
        drop.speed = (Math.random()*0.9 + 0.6)*(symbolSize*speedFactor);
      }
    }
    requestAnimationFrame(draw);
  }

  function fixDPR(){
    const dpr = window.devicePixelRatio || 1;
    canvas.width = Math.floor(window.innerWidth*dpr);
    canvas.height = Math.floor(window.innerHeight*dpr);
    canvas.style.width = window.innerWidth+'px';
    canvas.style.height = window.innerHeight+'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
    ctx.font = `${symbolSize}px monospace`;
  }

  window.addEventListener('resize', ()=>{fixDPR(); resize();},{passive:true});
  fixDPR();
  requestAnimationFrame(draw);

})();
</script>

<script>
// QUIZ LOGIC
const SHEET_URL = "https://script.google.com/macros/s/AKfycbwUsuf9SESCtU-UgWBCFDsk94MQfdVu6EnEga4RAkb5XmK_xRGCjC6xnIvEqL-3S2Gt/exec";

const questions = [
  {q:"Using the same password for multiple accounts is safe if it‚Äôs very complex.",a:false,e:"Reusing passwords creates a single point of failure ‚Äî one leak compromises all."},
  {q:"Public Wi-Fi networks can expose your traffic to interception.",a:true,e:"Attackers can capture unencrypted data over open networks."},
  {q:"Phishing attacks rely on emotional manipulation, not code exploits.",a:true,e:"They use fear, urgency, or greed to trick you."},
  {q:"Two-factor authentication (2FA) drastically improves account security.",a:true,e:"Even stolen passwords are useless without the second factor."},
  {q:"Cracked software is harmless if scanned with antivirus.",a:false,e:"Pirated apps often contain hidden malware."},
  {q:"A padlock icon means the website is completely safe.",a:false,e:"It only means encryption ‚Äî scammers can still use it."},
  {q:"Hackers often use social engineering instead of technical exploits.",a:true,e:"The human brain is the easiest system to hack."},
  {q:"Leaving Bluetooth or AirDrop always enabled is risk-free.",a:false,e:"Attackers can exploit open connections."},
  {q:"Strong passwords mix letters, numbers, and symbols.",a:true,e:"Entropy matters ‚Äî randomness increases security."},
  {q:"Ethical hackers use the same tools as black hats, legally.",a:true,e:"Difference is permission and intent."}
];

let idx = 0, score = 0, userName = "", userAnswers = [];

const qEl = document.getElementById('question');
const feedback = document.getElementById('feedback');
const btnT = document.getElementById('btnTrue');
const btnF = document.getElementById('btnFalse');
const nextBtn = document.getElementById('nextBtn');
const summary = document.getElementById('summary');
const scoreText = document.getElementById('scoreText');
const ratingEl = document.getElementById('rating');
const restartBtn = document.getElementById('restartBtn');
const quizArea = document.getElementById('quizArea');
const progressBar = document.getElementById('progressBar');
const progressText = document.getElementById('progressText');
const namePrompt = document.getElementById('namePrompt');
const progressSection = document.getElementById('progressSection');
const saveStatus = document.getElementById('saveStatus');
const startBtn = document.getElementById('startBtn');

startBtn.onclick = ()=>{
  userName = document.getElementById('userName').value.trim();
  if(!userName) return alert("Access denied: Enter alias first.");
  namePrompt.classList.add('hidden');
  quizArea.classList.remove('hidden');
  progressSection.classList.remove('hidden');
  renderQuestion();
};

function renderQuestion(){
  const q = questions[idx];
  qEl.textContent = `${idx+1}. ${q.q}`;
  feedback.textContent = "";
  btnT.disabled = btnF.disabled = false;
  nextBtn.style.display = "none";
  updateProgress();
}

function updateProgress(){
  const percent = (idx/questions.length)*100;
  progressBar.style.width = percent + "%";
  progressText.textContent = `Question ${idx+1} of ${questions.length}`;
}

btnT.onclick = ()=>answer(true);
btnF.onclick = ()=>answer(false);

function answer(isTrue){
  const q = questions[idx];
  const correct = q.a === isTrue;
  userAnswers.push({question:q.q,answer:isTrue,correct});
  btnT.disabled = btnF.disabled = true;
  feedback.textContent = (correct?"‚úî ACCESS GRANTED ‚Äî ":"‚úò ACCESS DENIED ‚Äî ") + q.e;
  feedback.className = "feedback " + (correct?"correct":"wrong");
  nextBtn.style.display = "inline-block";
  if(correct) score++;
}

nextBtn.onclick = next;

function next(){
  idx++;
  if(idx >= questions.length){
    progressBar.style.width = "100%";
    showSummary();
  } else renderQuestion();
}

function showSummary(){
  quizArea.style.display = "none";
  summary.style.display = "block";
  const percent = Math.round((score/questions.length)*100);
  scoreText.textContent = `${userName}, you scored ${score}/${questions.length} (${percent}%)`;

  let rating="";
  if(percent>=80){ rating=">>> STATUS: ELITE HACKER üü©"; ratingEl.className="excellent";}
  else if(percent>=50){ rating=">>> STATUS: INTERMEDIATE üü¶"; ratingEl.className="good";}
  else{ rating=">>> STATUS: RECRUIT üü•"; ratingEl.className="tryagain";}
  ratingEl.textContent = rating;

  progressText.textContent = "SYSTEM: Quiz Complete üß†";

  fetch(SHEET_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      name:userName,
      score:score,
      total:questions.length,
      percent:percent,
      answers:userAnswers
    })
  })
  .then(r=>r.json())
  .then(d=>saveStatus.textContent="‚úî Saved to server")
  .catch(()=>saveStatus.textContent="‚úò Save Failed");
}

restartBtn.onclick = ()=>location.reload();
</script>

</body>
</html>
